{
  "task_planning": {
    "template": "ЗАДАЧА: {task_description}\n\n1. Оцени сложность задачи (простая/средняя/сложная).\n2. Выбери соответствующую длину плана: простая=1-2 шага, средняя=3-5, сложная=5-8+ с подцелями.\n3. Для каждого шага укажи основной инструмент, аргументы, и короткую подсказку что делать если шаг не удался (fallback).\n4. Включай шаги проверки результата (скриншот/лог) после критичных действий.\n5. Всегда учитывай, что это Windows-среда с несколькими мониторами и возможностью анализировать изображение.\n\nВерни ТОЛЬКО JSON массив: \n[\n  {\n    \"step\": 1,\n    \"description\": \"кратко что делаем\",\n    \"tool\": \"имя_инструмента\",\n    \"args\": {\"параметр\": \"значение\"},\n    \"fallback\": \"альтернативный ход при неудаче\",\n    \"verify\": \"как проверить результат (скриншот/лог)\"\n  }\n]\n\nДоступные инструменты:\n{available_tools}\n\nТребования:\n- Минимизируй шаги, но не пропускай необходимые проверки.\n- Для GUI всегда работай с абсолютными координатами.\n- Если шаг может быть автоматизирован скриптом, отметь это в fallback.\n- Добавляй шаги scheduler, когда требуется отложенное действие."
  },
  
  "image_analysis": {
    "general": "Проанализируй изображение. Отвечай КРАТКО и по делу.\nВсегда возвращай абсолютные координаты X,Y если речь об интерфейсе.\nИзображение: {image_path}\nВопрос: {question}",
    
    "screen_verification": "Проверь, находится ли ожидаемый элемент в выделенной области.\nОтветь одним словом: yes или no.\nЕсли no, предложи куда кликнуть (X,Y).\nСкриншот: {screenshot_path}",
    
    "web_page_analysis": "Проанализируй скриншот веб-страницы:\n1. Название сайта и текущая страница\n2. Основной контент и информация\n3. Найди и извлеки: {target_info}\n4. Есть ли элементы для взаимодействия: кнопки, формы, ссылки\n\nСкриншот: {screenshot_path}\nЗадача: {task}",
    
    "price_extraction": "На скриншоте найди цены товаров. Ищи:\n- Цены в зелёной рамке с текстом '{price_marker}'\n- Основную цену товара\n- Цену со скидкой\n- Старую цену (зачёркнутую)\n\nВерни только найденные цены в формате: 'цена₽' или 'цена руб.'\nЕсли цен несколько - через запятую.\nЕсли не найдено - напиши 'не найдено'.\n\nСкриншот: {screenshot_path}",
    
    "price_extraction_structured": "Проанализируй скриншот страницы товара на ozon.ru и извлеки:\n1. Название товара\n2. Все виды цен (основная цена, цена со скидкой, старая цена, цена для подписчиков и т.д.)\n3. Валюта (рубли, ₽)\n\nВерни JSON в формате:\n{{\n  \"product_name\": \"название товара\",\n  \"prices\": [\n    {{\"type\": \"основная\", \"value\": \"цена\", \"currency\": \"₽\"}},\n    {{\"type\": \"со скидкой\", \"value\": \"цена\", \"currency\": \"₽\"}},\n    {{\"type\": \"старая\", \"value\": \"цена\", \"currency\": \"₽\"}}\n  ]\n}}\n\nСкриншот: {screenshot_path}",
    
    "form_analysis": "Проанализируй форму на скриншоте:\n1. Какие поля нужно заполнить?\n2. Какие значения уже введены?\n3. Какие кнопки доступны?\n4. Есть ли ошибки валидации?\nВерни координаты для каждого поля.\n\nСкриншот: {screenshot_path}\nПоля для заполнения: {fields}",
    "desktop_icon_locator": "На скриншоте рабочего стола найди ярлык приложения '{app_name}'. Верни ТОЛЬКО JSON: {\"coordinates\":[{\"x\":X,\"y\":Y,\"action\":\"double_click\"}],\"confidence\":0-1}. Если не найдено, укажи confidence=0.",
    "gui_verification": "Найди нужный элемент интерфейса и оцени результат.\nВерни JSON: {\"status\": \"success|fail\", \"coordinates\": {\"x\": X, \"y\": Y}, \"evidence\": \"что видно на экране\"}.\nИспользуй абсолютные координаты и описывай, что подтверждает выполнение."
  },
  
  "file_operations": {
    "read_analysis": "Прочитай содержимое файла {filepath} и:\n1. Определи тип и формат данных\n2. Извлеки основную информацию\n3. Если это список - посчитай элементы\n4. Если есть структура - опиши её\n5. Найди {target_data} если указано",
    
    "file_processing": "Обработай файл {filepath}:\nЗадача: {task}\nФормат результата: {output_format}\nСохранить в: {output_path}"
  },
  
  "browser_automation": {
    "navigation": "Перейди на сайт {url} и:\n1. Дождись полной загрузки\n2. Проверь, что страница открылась корректно\n3. Найди элемент: {target_element}\n4. Сделай скриншот для подтверждения",
    
    "form_filling": "Заполни форму на странице:\nПоля: {form_fields}\nЗначения: {form_values}\nПосле заполнения нажми: {submit_button}\nСделай скриншот результата",
    
    "data_extraction": "Извлеки данные со страницы:\nТип данных: {data_type}\nСелекторы: {selectors}\nСохрани в: {output_file}\nФормат: {format}"
  },
  
  "scheduler_actions": {
    "template": "Пользователь хочет выполнить действие в будущем: '{user_request}'.\nОпредели, нужно ли использовать schedule_task или schedule_recurring_task.\nЕсли требуется единичное действие — сформируй аргументы schedule_task.\nЕсли повторяющееся — schedule_recurring_task.\nВсегда указывай action, время (delay_minutes/delay_hours/specific_time) и дополнительные параметры (command/filename/custom_action).\nВерни JSON готового вызова инструмента.",
    "examples": [
      {"name": "schedule_task", "arguments": {"action": "take_screenshot", "specific_time": "15:30", "filename": "desk.png"}},
      {"name": "schedule_recurring_task", "arguments": {"action": "execute_command", "every_minutes": 30, "duration_hours": 4, "command": "Get-Process"}}
    ]
  },
  
  "scheduled_task_parsing": {
    "template": "Пользователь просит: '{user_request}'\n\nОпредели:\n1. Какое действие нужно выполнить (close_browser, take_screenshot, execute_command, custom)\n2. Через какое время (в минутах или часах)\n3. Дополнительные параметры\n\nВерни JSON:\n{{\n  \"action\": \"тип_действия\",\n  \"delay_minutes\": число_минут_или_null,\n  \"delay_hours\": число_часов_или_null,\n  \"specific_time\": \"HH:MM_или_null\",\n  \"command\": \"команда_если_нужна\",\n  \"filename\": \"имя_файла_если_нужно\",\n  \"custom_action\": \"описание_если_custom\"\n}}\n\nПримеры:\n- 'Закрой браузер через 30 минут' → {{\"action\": \"close_browser\", \"delay_minutes\": 30}}\n- 'Сделай скриншот в 15:30' → {{\"action\": \"take_screenshot\", \"specific_time\": \"15:30\", \"filename\": \"scheduled.png\"}}"
  },
  
  "command_generation": {
    "windows": "Создай команду Windows PowerShell для:\n{task}\n\nТребования:\n- Команда должна быть безопасной\n- Используй полные пути\n- Добавь обработку ошибок если возможно\n- Верни только команду без пояснений",
    
    "application": "Создай команду для {action} приложения '{app_name}':\n- Для запуска: используй 'start' или путь к .exe\n- Для закрытия: используй 'taskkill'\n- Для проверки: используй 'tasklist'\n\nВерни готовую команду."
  },
  
  "error_recovery": {
    "template": "Произошла ошибка при выполнении:\nИнструмент: {tool_name}\nОшибка: {error_message}\n\nПредложи альтернативный способ решения задачи:\n{original_task}\n\nВерни JSON с новым планом действий."
  },
  
  "contact_extraction": {
    "template": "Найди на странице контактную информацию:\nТипы: {contact_types}\nПриоритетные секции: {sections}\n\nИщи:\n- Телефоны в форматах: +7..., 8..., (код) номер\n- Email адреса\n- Физические адреса\n- Социальные сети\n\nВерни структурированный JSON с найденной информацией."
  },
  
  "multi_page_task": {
    "template": "Задача требует обработки нескольких страниц:\nСписок URL: {urls}\nДля каждой страницы:\n1. {step_1}\n2. {step_2}\n3. {step_3}\n\nРезультаты собери в файл: {output_file}\nФормат отчёта: {report_format}"
  },
  "desktop_automation": {
    "minimize_and_locate": "Сверни все окна, сделай скриншот, найди ярлык '{app_name}' и верни координаты для клика."
  }
}